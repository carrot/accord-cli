#!/usr/bin/env node
try {
  require('coffee-script/register');
  // in production, this will fail if coffeescript isn't installed, but the
  // coffee is compiled anyway, so it doesn't matter
} catch(e){}

var cli = require('../lib'),
    argv = require('minimist')(process.argv.slice(2), {
      alias: {
        'c': 'compile',
        'o': 'out',
        'w': 'watch',
        'h': 'help'
      }
    });

cli.on('start', function(){
  if (argv.out) { process.stdout.write('compiling... '.grey) }
});

cli.on('done', function(){
  if (argv.out) { console.log('done!'.green) }
});

cli.on('data', console.log.bind(console));
cli.on('err', console.error.bind(console));

cli.run(argv);
