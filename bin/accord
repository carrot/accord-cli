#!/usr/bin/env node
fs = require('fs');
path = require('path')

try {
  require('coffee-script/register');
  // in production, this will fail if coffeescript isn't installed, but the
  // coffee is compiled anyway, so it doesn't matter
} catch(e){}

var cli = require('../lib'),
    argv = require('minimist')(process.argv.slice(2), {
      alias: {
        'c': 'compile',
        'o': 'out',
        'w': 'watch',
        'h': 'help'
      }
    });

cli.on('data', function (data) {
  if (argv.out) {
    fs.writeFileSync(path.resolve(argv.out), data);
  } else {
    console.log(data);
  }
});
cli.on('err', console.error.bind(console));
cli.run(argv);
